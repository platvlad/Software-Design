# Интерпретатор командной строки
Интерпретатор командной строки, написанный на Java, работающий на операционных 
системах Windows и Linux.

Поддерживаемые команды:

* cat
* cd
* echo
* pwd
* wc
* exit

Также реализовано присваивание переменных и обращение к 
переменным, а также вызов внешних команд.

## Тестирование
Для тестирования вызова внешних команд используется проект 
Summator, который можно собрать с помощью CMake командой 

```cmake ../../../Summator/Summator -DCMAKE_BUILD_TYPE=Debug -DTARGET_CPU=x86```

вызванной из src/test/resources или с помощью Makefile.

## Архитектура интерпретатора
Строка, поступающая от пользователя, передаётся объекту класса 
LineParser, который, используя класс CommandParser, разбивает
строку на отдельные команды, разделённые символом конвейера.

CommandParser читает строку до появления символа конвейера, 
подставляя значения встретившихся переменных, хранящиеся в 
классе InterpreterEnvironment.

Для каждого вида команды существует отдельный класс,
который наследуется от класса Command и реализует функцию 
execute, отвечающую за выполнение этой команды.

Для каждой команды в конвейере создаётся объект класса Command.
Для этих объектов поочерёдно вызываются функции выполнения. 
Выход каждой команды, представленный как объект класса IOData,
используется как вход для последующей в конвейере. Результат 
работы последней команды выводится на экран. В случае 
возникновения ошибки в одной из промежуточных команд выводится
сообщение об ошибке, последующие команды конвейереа не 
выполняются.

Ниже представленна диаграмма последовательностей интерпретатора.

![Диаграмма последовательностей](/diagrams/Sequence%20diagram.PNG )

## Разбор аргументов командной строки
Для разбора аргументов командной строки была выбрана 
библиотека Apache Commons CLI.

Она позволяет добавлять к команде опции, даёт возможность 
удобно их настроить, указав, являются ли они обязательными, а
также принимают ли аргументы. Кроме этого имеется возможность 
задать описание опций и описание опций, которое может быть 
выведено при подаче неправильных аргументов. Часть аргументов 
команды может не иметь ключей (например, имя файла в случае с 
grep). Такие аргументы могут быть легко получены. Библиотека 
 разрабатывается в рамках крупного проекта Apache Commons, что 
повышает вероятность продолжения поддержки в будущем и 
применимости в широком ряде случаев.

### Альтернативы
Также была рассмотрена библиотека JCommander.

Она также предоставляет возможность настраивать параметры 
опций, такие как описание, имя и наличие аргументов, 
инкапсулируя эти данные в отдельном классе, что выглядит 
более естественно в объектно-ориентированном коде, хотя и 
заставляет создавать отдельный класс аргументов для каждой 
команды даже для простых случаев, что теоретически может 
сделать использование менее гибким. Так же, как и в Apache 
Comons CLI реалиозвана возможность печати справки о команде
и разбора аргументов без ключей.

Обе библитоеки предоставляют требуемую функциональность 
разбора аргументов командной строки. Apache Commons CLI 
была выбрана прежде всего из-за того, что относится к более 
крупному проекту и более часто используется.